#!/bin/env bash
script_afp=$(realpath "${BASH_SOURCE[0]}")

# input guards

  env_must_be="tester/toolðŸ–‰/env"
  if [ "$ENV" != "$env_must_be" ]; then
    echo "$(script_fp):: error: must be run in the $env_must_be environment"
    exit 1
  fi

echo "Compiling files..."

  set -x
  cd $REPO_HOME/tester
  javac -g -d scratchpad javacðŸ–‰/*.java
  jar cf jvm/Test_"$PROJECT".jar -C scratchpad .
  set +x 

echo "Creating bash wrappers..."
  mkdir -p bash
  # wrapper is a space separated list
  wrapper=$(bash_wrapper_list)
  for file in $wrapper;do
    cat > bash/$file << EOL
#!/bin/env bash
java $file
EOL
    chmod +x bash/$file
  done

echo "$(script_fp) done."
